syntax = "proto3";
package eshop;

// ----- UTILS -----
message Pagination {
  uint32 limit = 1;
  uint32 offset = 2;
}

// -----------------

service EshopService {
  rpc GetBookById(GetBookByIdRequest) returns (Book) {}
  rpc GetAuthorById(GetAuthorByIdRequest) returns (Author) {}
  rpc GetUserByID(GetUserByIdRequest) returns (User) {}
  rpc GetBooks(GetBooksRequest) returns (Books) {}
  rpc GetAuthors(GetAuthorsRequest) returns (Authors) {}
  rpc GetMyBooks(GetMyBooksRequest) returns (Books) {}
}

message Book {
  string id = 1;
  bool is_owned = 2;
  repeated Chapter chapters = 3;
  repeated Author authors = 4;
  uint64 length = 5;
  string name = 6;
  string description = 7;
  string file_url = 8;
  string cover_url = 9;
  uint64 price = 10;
  string ISBN = 11;
}

message Author {
  string id = 1;
  string name = 2;
}

message Chapter {
  string id = 1;
  string chapter_name = 2;
  uint32 start = 3;
}

message User {
  string id = 1;
  string name = 2;
  bool studio_access = 3;
}

message Books {
  uint32 total = 1;
  repeated Book books = 2;
}

message Authors {
  uint32 total = 1;
  repeated Author authors = 2;
}

message GetBookByIdRequest { string id = 1; }
message GetAuthorByIdRequest { string id = 1; }
message GetUserByIdRequest { string id = 1; }
message GetBooksRequest { Pagination pagination = 1; }
message GetAuthorsRequest { Pagination pagination = 1; }
message GetMyBooksRequest { Pagination pagination = 1; }
